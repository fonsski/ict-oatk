# üê≥ Laravel Sail —Å WebSocket - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ WebSocket —Å Sail

WebSocket —Å–µ—Ä–≤–µ—Ä —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å Laravel Sail –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏!

## üìã –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ **websocket-server** —Å–µ—Ä–≤–∏—Å –¥–æ–±–∞–≤–ª–µ–Ω –≤ `docker-compose.yml`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö (`restart: unless-stopped`)
- ‚úÖ Healthcheck –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–µ—Ç–µ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Docker –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ö–æ—Å—Ç—ã –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è WebSocket

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (Laravel + WebSocket + Telegram Bot)
./sail-with-websocket.sh start

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./sail-with-websocket.sh health

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ WebSocket —Å–µ—Ä–≤–µ—Ä
./sail-with-websocket.sh websocket

# –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ WebSocket —Å–µ—Ä–≤–µ—Ä–∞
./sail-with-websocket.sh logs

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./sail-with-websocket.sh stop

# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
./sail-with-websocket.sh status
```

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Sail:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./vendor/bin/sail up -d

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./vendor/bin/sail down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å WebSocket —Å–µ—Ä–≤–µ—Ä
./vendor/bin/sail restart websocket-server

# –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ WebSocket —Å–µ—Ä–≤–µ—Ä–∞
./vendor/bin/sail logs websocket-server -f

# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä WebSocket —Å–µ—Ä–≤–µ—Ä–∞
./vendor/bin/sail exec websocket-server bash
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
./sail-with-websocket.sh start
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è:
```bash
./sail-with-websocket.sh health
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ WebSocket endpoints:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:8080/test

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:8080/status

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
curl http://localhost:8080/clients
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```bash
docker-compose ps
```

### –õ–æ–≥–∏ WebSocket —Å–µ—Ä–≤–µ—Ä–∞:
```bash
./vendor/bin/sail logs websocket-server --tail=50 -f
```

### Healthcheck —Å—Ç–∞—Ç—É—Å:
```bash
docker inspect sail-ict_websocket-server_1 | grep -A 10 Health
```

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã:

- **Laravel –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: http://localhost
- **WebSocket —Å–µ—Ä–≤–µ—Ä**: http://localhost:8080
- **Vite dev server**: http://localhost:5173
- **MySQL**: localhost:3306

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:

```env
# WebSocket –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
WEBSOCKET_HOST=0.0.0.0
WEBSOCKET_PORT=8080
WEBSOCKET_ENABLED=true
WEBSOCKET_TIMEOUT=5
WEBSOCKET_DOCKER_HOST=websocket-server
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### WebSocket —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   ./vendor/bin/sail logs websocket-server
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 8080:**
   ```bash
   netstat -tulpn | grep 8080
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ WebSocket —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   ./sail-with-websocket.sh websocket
   ```

### WebSocket –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ healthcheck:**
   ```bash
   ./sail-with-websocket.sh health
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å Docker:**
   ```bash
   docker network ls
   docker network inspect sail-ict_sail
   ```

### Laravel –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ WebSocket:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   ./vendor/bin/sail exec laravel.test env | grep WEBSOCKET
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å:**
   ```bash
   ./vendor/bin/sail exec laravel.test curl http://websocket-server:8080/test
   ```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

- WebSocket —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–±–æ—è—Ö
- –õ–æ–≥–∏ —Ä–æ—Ç–∏—Ä—É—é—Ç—Å—è (–º–∞–∫—Å–∏–º—É–º 10MB, 3 —Ñ–∞–π–ª–∞)
- Healthcheck –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤:

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
docker stats

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ WebSocket –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker inspect sail-ict_websocket-server_1
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `./vendor/bin/sail up -d` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:

- ‚úÖ **Laravel –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (–ø–æ—Ä—Ç 80)
- ‚úÖ **WebSocket —Å–µ—Ä–≤–µ—Ä** (–ø–æ—Ä—Ç 8080) 
- ‚úÖ **Telegram Bot** (—Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å)
- ‚úÖ **MySQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** (–ø–æ—Ä—Ç 3306)

**WebSocket —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è! üöÄ**
