# Авторизация и регистрация через номер телефона

## Содержание

1. [Общие сведения](#общие-сведения)
2. [Процесс регистрации](#процесс-регистрации)
3. [Процесс авторизации](#процесс-авторизации)
4. [Отображение телефона заведующего кабинетом](#отображение-телефона-заведующего-кабинетом)
5. [Технические особенности](#технические-особенности)
6. [Решение проблем](#решение-проблем)

## Общие сведения

В системе ICT реализована авторизация и регистрация через номер телефона без отправки SMS-кодов. Этот метод был выбран для упрощения процесса регистрации и авторизации пользователей.

### Особенности реализации

- Пользователи регистрируются с использованием номера телефона вместо email
- Система не отправляет SMS-коды для верификации (работает в режиме заглушки)
- Для регистрации используется стандартная форма с полями: ФИО, телефон, пароль
- Для совместимости с системой каждому пользователю автоматически генерируется уникальный email

## Процесс регистрации

1. Пользователь переходит на страницу регистрации
2. Заполняет форму с указанием своего имени, номера телефона и пароля
3. Система проверяет уникальность номера телефона
4. После успешной проверки создается новая учетная запись
5. Система автоматически генерирует уникальный email для пользователя в формате `user_[timestamp]@example.com`
6. Пользователь автоматически входит в систему

## Процесс авторизации

1. Пользователь переходит на страницу входа
2. Вводит свой номер телефона и пароль
3. Система проверяет учетные данные
4. При успешной проверке пользователь входит в систему

## Отображение телефона заведующего кабинетом

Если у кабинета есть заведующий, то его номер телефона отображается в соответствующих разделах системы:

- На странице информации о кабинете
- В списке контактов заведующих кабинетами
- В отчетах и печатных формах

## Технические особенности

### Структура базы данных

Для работы с телефонными номерами используются следующие поля в таблице `users`:

- `phone` - номер телефона пользователя (уникальное поле)
- `email` - автоматически сгенерированный email (для совместимости)

### Валидация телефонных номеров

Система выполняет базовую валидацию телефонного номера:
- Проверка на уникальность
- Проверка формата (только цифры, +, -, пробелы)
- Максимальная длина - 20 символов

### Поиск пользователей

Система позволяет искать пользователей по номеру телефона, что упрощает процесс поиска и идентификации.

## Решение проблем

### Что делать, если номер телефона указан неверно?

Администратор системы может изменить номер телефона пользователя через админ-панель.

### Как быть, если у пользователя нет номера телефона?

В исключительных случаях администратор может создать учетную запись с временным номером телефона и предоставить пользователю данные для входа.

### Что делать при смене номера телефона?

Пользователь должен обратиться к администратору системы для изменения номера телефона в своей учетной записи.