# Система инвентарных номеров

## Описание

Система автоматического присвоения инвентарных номеров оборудованию с валидацией формата и подсказками для пользователей.

## Формат инвентарного номера

### Структура
```
КодЗданияЭтаж-Группа-Номер
```

### Компоненты

1. **Код здания**: А, Б
2. **Этаж**: 1, 2, 3, 4, 5  
3. **Группа пользователей**: студент, администрация, сотрудник
4. **Номер оборудования**: 001, 002, 003... (трехзначный)

### Примеры
- `А1-студент-001` - корпус А, 1 этаж, студенческое оборудование, номер 001
- `Б3-администрация-005` - корпус Б, 3 этаж, административное оборудование, номер 005
- `А2-сотрудник-012` - корпус А, 2 этаж, оборудование сотрудников, номер 012

## Функциональность

### 1. Счетчик символов
- **Лимит**: 3-20 символов
- **Предупреждение**: при 15+ символах
- **Визуальная индикация**: серый/оранжевый/красный

### 2. Валидация на сервере
- **Regex**: `/^[АБ][1-5]-[а-я]+-\d{3}$/`
- **Уникальность**: проверка на дубликаты
- **Длина**: 3-20 символов

### 3. Автодополнение
- **Умные подсказки** на основе введенного текста
- **Контекстные предложения** для каждого этапа ввода
- **Быстрый выбор** из списка подсказок

## Пользовательский интерфейс

### Подсказка формата
```html
<div class="mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md">
    <h3>Формат инвентарного номера</h3>
    <p>Используйте следующий формат: <strong>КодЗданияЭтаж-Группа-Номер</strong></p>
    <p>Примеры: А1-студент-001, Б3-администрация-005, А2-сотрудник-012</p>
</div>
```

### Счетчик символов
```html
<input data-char-counter
       data-max-length="20"
       data-min-length="3"
       data-warning-threshold="15"
       data-help-text="Минимум 3, максимум 20 символов">
```

## Автодополнение

### Логика работы

1. **Ввод кода здания** (А/Б) → предложения этажей и групп
2. **Ввод этажа** (А1) → предложения групп
3. **Ввод группы** (А1-студент) → предложения номеров
4. **Завершение** → валидация формата

### Примеры автодополнения

| Ввод | Предложения |
|------|-------------|
| `а` | А1-студент-001, А1-администрация-001, А1-сотрудник-001... |
| `а1` | А1-студент-001, А1-администрация-001, А1-сотрудник-001 |
| `а1-` | А1-студент-001, А1-администрация-001, А1-сотрудник-001 |
| `а1-ст` | А1-студент-001 |

## Валидация

### Клиентская валидация
- Счетчик символов в реальном времени
- Визуальные индикаторы состояния
- Автодополнение и подсказки

### Серверная валидация
- Проверка формата через regex
- Проверка уникальности в базе данных
- Проверка длины (3-20 символов)

### Сообщения об ошибках
- `required` - "Пожалуйста, укажите инвентарный номер"
- `min` - "Инвентарный номер должен содержать не менее 3 символов"
- `max` - "Инвентарный номер не должен превышать 20 символов"
- `unique` - "Оборудование с таким инвентарным номером уже существует"
- `regex` - "Инвентарный номер должен соответствовать формату: КодЗданияЭтаж-Группа-Номер"

## Интеграция

### Автоматическая инициализация
```javascript
// Автоматически подключается к полям с name="inventory_number"
document.addEventListener('DOMContentLoaded', function() {
    const inventoryInputs = document.querySelectorAll('input[name="inventory_number"]');
    inventoryInputs.forEach(input => {
        new InventoryNumberHelper(input);
    });
});
```

### Ручная инициализация
```javascript
const helper = new InventoryNumberHelper(document.getElementById('inventory_number'));
```

## Файлы системы

- `resources/js/inventory-number-helper.js` - основной модуль автодополнения
- `resources/js/char-counter.js` - счетчик символов
- `app/Http/Requests/StoreEquipmentRequest.php` - валидация создания
- `app/Http/Requests/UpdateEquipmentRequest.php` - валидация обновления
- `resources/views/equipment/create.blade.php` - форма создания
- `resources/views/equipment/edit.blade.php` - форма редактирования
