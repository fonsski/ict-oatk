# Руководство по настройке SMTP для Google Gmail

Это руководство поможет вам настроить отправку электронной почты через SMTP Gmail в системе ICT.

## Информация для подключения

Используйте следующие данные для настройки SMTP:
- **Email**: support.ict@oatk.org
- **Пароль**: noh9phiH
- **SMTP-сервер**: smtp.gmail.com
- **Порт**: 587
- **Шифрование**: TLS

## Настройка в файле .env

Добавьте следующие строки в файл `.env` в корне проекта:

```env
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=support.ict@oatk.org
MAIL_PASSWORD=noh9phiH
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=support.ict@oatk.org
MAIL_FROM_NAME="ИКТ Поддержка"
```

## Решение возможных проблем

### 1. Проблемы с безопасностью аккаунта Google

Если возникают ошибки аутентификации:

1. Войдите в аккаунт Google, используя предоставленные учетные данные
2. Перейдите в [Безопасность аккаунта](https://myaccount.google.com/security)
3. Включите "Доступ для менее безопасных приложений"
   - *Примечание*: Google может не рекомендовать это, но для SMTP-серверов часто требуется
4. Если включена двухфакторная аутентификация, создайте пароль приложения:
   - Перейдите в [Пароли приложений](https://myaccount.google.com/apppasswords)
   - Выберите "Другое (указать название)" и введите "ICT System"
   - Используйте сгенерированный пароль вместо обычного пароля в настройках SMTP

### 2. Ограничения Gmail

Gmail имеет ограничения на количество отправляемых писем:
- До 500 писем в день для обычных аккаунтов Google
- До 2000 писем в день для аккаунтов Google Workspace

### 3. Тестирование отправки

После настройки SMTP протестируйте отправку с помощью команды:

```bash
php artisan test:email-notifications --email=your-test-email@example.com --smtp
```

Эта команда также покажет текущие настройки SMTP и проверит соединение с сервером.

## Логирование и отладка

Для отладки отправки писем проверяйте журналы в директории `storage/logs`.

Если вы не получаете письма:
1. Проверьте папку "Спам" в почтовом ящике получателя
2. Убедитесь, что аккаунт Google не заблокирован из-за подозрительной активности
3. Проверьте логи Laravel на наличие ошибок SMTP

## Дополнительная информация

Если у вас возникли проблемы с настройкой или необходимо изменить данные для доступа, обратитесь к администратору Google Workspace через admin.google.com.